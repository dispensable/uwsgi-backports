Description: Distinguish ssize_t error code from size_t value
 'writev' returns ssize_t value, which could contain error code (-1) or
 number of written bytes.
 .
 When returned value assigned to size_t variable and checked for error code (in
 one shot), GCC warns about 'comparison of unsigned expression < 0 is always
 false'.
Author: Leonid Borisenko <leo.borisenko@gmail.com>
Forwarded: http://lists.unbit.it/pipermail/uwsgi/2010-September/000666.html
Last-Update: 2010-09-26

Index: uwsgi/plugins/rack/rack_plugin.c
===================================================================
--- uwsgi.orig/plugins/rack/rack_plugin.c	2011-01-31 21:15:14.000000000 +0200
+++ uwsgi/plugins/rack/rack_plugin.c	2011-01-31 21:35:36.000000000 +0200
@@ -331,7 +331,7 @@
         	wsgi_req->hvec[4].iov_base = "\r\n";
         	wsgi_req->hvec[4].iov_len = 2 ;
 
-		if ( (wsgi_req->response_size = writev(wsgi_req->poll.fd, wsgi_req->hvec, 5)) < 0) {
+		if ( !(wsgi_req->response_size = writev(wsgi_req->poll.fd, wsgi_req->hvec, 5)) ) {
                 	uwsgi_error("writev()");
         	}
 
