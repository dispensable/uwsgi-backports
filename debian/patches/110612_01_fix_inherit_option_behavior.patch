Description: Fix '--inherit' option behavior
 Process options in reverse order for better templating.
 .
 (see http://lists.unbit.it/pipermail/uwsgi/2011-June/002182.html)
Origin: upstream, http://projects.unbit.it/hg/uwsgi/rev/5cccb38b8b70
Origin: upstream, http://projects.unbit.it/hg/uwsgi/rev/2e8074ecafec
Last-Update: 2011-06-13

Index: uwsgi/uwsgi.c
===================================================================
--- uwsgi.orig/uwsgi.c	2011-06-13 16:11:57.000000000 +0300
+++ uwsgi/uwsgi.c	2011-06-13 16:14:42.000000000 +0300
@@ -229,7 +229,18 @@
 	int is_retry;
 	int found;
 
+	// option must be processed in reverse (to have a consistent template system)
+	// but first load plugins...
 	for (i = 0; i < uwsgi.exported_opts_cnt; i++) {
+		if (uwsgi.exported_opts[i]->configured)
+                        continue;
+
+		if (!strcmp("plugin", uwsgi.exported_opts[i]->key) || !strcmp("plugins", uwsgi.exported_opts[i]->key)) {
+			manage_opt(LONG_ARGS_PLUGINS, uwsgi.exported_opts[i]->value);
+		}
+	}
+
+	for (i = uwsgi.exported_opts_cnt-1; i >= 0; i--) {
 
 		if (uwsgi.exported_opts[i]->configured)
 			continue;
